<div class="row">

      <!-- Grid column -->
      <div class="col-6 p-1">

        <div class="card grey lighten-2">
          <div class="card-body pb-0">
            <i class="fas fa-cloud fa-3x pb-4"></i>
            <div class="d-flex justify-content-between">
              <p class="mb-0 h6">Customers</p>
            </div>
          </div>
          <hr>
          <div class="card-body pt-0">
            <h6 class="font-weight-bold mb-1"># <%=@customers_count%></h6>
            <p class="mb-0">
              <a href="/admin/customers">show</a>
            </p>
          </div>
        </div>

      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-6 p-1">

        <div class="card grey lighten-3">
          <div class="card-body pb-0">
            <i class="fas fa-cloud fa-3x pb-4"></i>
            <div class="d-flex justify-content-between">
              <p class="mb-0 h6">Accounts</p>
            </div>
          </div>
          <hr>
          <div class="card-body pt-0">
            <h6 class="font-weight-bold mb-1"># <%=@accounts_count%></h6>
            <p class="mb-0">
              <a href="/admin/accounts">show</a>
            </p>
          </div>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

   
<div class="row mt-5">
    <div class="col-md-6">
        <canvas id="myChart" width="400" height="300"></canvas>
    </div>
    <div class="col-md-6">
        <canvas id="lastDays" width="400" height="300"></canvas>
    </div>
</div>

<div class="row mt-5">
  <div class="col-md-12">
    <div class="h5 text-center py-5">Today's Purchases</div>

<table class="table table-striped table-sm">
        <thead class="thead-light">
                <tr class="bg-info">
                    <th>Customer</th>
                    <th>Plan</th>
                    <th>AccId</th>
                    <th>Purchased Date</th>
                    <th>Due Date</th>
                </tr>
            </thead>
            <tbody>
                <% @latest.each do |account| %>
                    <tr>
                        <td><%=account.customer.email %></td>
                        <td><%= account.plan.name %></td>
                        <td><%= account.acc_id %></td>
                        <td><%= account.created_at.strftime("%F") %></td>
                        <td><%= account.due_date.strftime("%F") %></td>
                    </tr>
    
                <% end %>
            </tbody>
        </table> 

  </div>
</div>

</div>
<script>
var ctx = document.getElementById('myChart');

new Chart(document.getElementById("lastDays"), {
  type: 'line',
  data: {
    labels: <%= raw @last_days.map {|d| d.first.strftime("%F") }.to_a %>,
    datasets: [{ 
        data: <%= raw @last_days.map {|d| d.last }.to_a%>,
        label: "Africa",
        borderColor: "#3e95cd",
        fill: false
      }
    ]
  },
  options: {
    title: {
      display: true,
      text: 'World population per region (in millions)'
    }
  }
});


new Chart(document.getElementById("myChart"), {
    type: 'pie',
    data: {
      labels: <%= raw @data.map {|d| d[:plan] }.to_a%>,
      datasets: [{
        label: "Population (millions)",
        backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
        data: <%= raw @data.map {|d| d[:count] }.to_a%>
      }]
    },
    options: {
      title: {
        display: true,
        text: 'Predicted world population (millions) in 2050'
      }
    }
});
</script>