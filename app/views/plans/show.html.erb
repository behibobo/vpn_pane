<div class="container-fluid single_plan">
    <div class="row justify-content-md-center">
        <div class="col-md-4 p-5">
            <div class="pricing-card p-3 text-center py-5 mt-2">
                <div class="images">
                    <img src="/images/vpn.svg" width="50">
                </div>
                <h6 class="mt-3"><%=@plan.name%></h6>
                <span class="d-block font-weight-bold mt-3">$<%=@plan.price%></span>
                <span class="d-block"><%=@plan.interval%></span>

                <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" name="form-pp">
                <input type="hidden" name="business" value="sb-cjjnm2583485@business.example.com">
                <input type="hidden" name="image_url" value="https://www.paypalobjects.com/webstatic/en_US/i/buttons/checkout-logo-large.png">
                <input type="hidden" name="charset" value="utf8">
                <input type="hidden" name="item_name" value="<%=@plan.name%>">
                <input type="hidden" name="item_number" value="1">
                <input type="hidden" name="amount" value="<%=@plan.price%>">
                <input type="hidden" name="currency_code" value="USD">
                <input type="hidden" name="cmd" value="_xclick">
                <input type="hidden" name="no_note" value="1">
                <input type="hidden" name="no_shipping" value="1">
                <input type="hidden" name="custom" id="custom_txt" value="value of the custom field">
                <input type="hidden" name="return" value="http://localhost:3000/payment_return">
                <input type="hidden" name="rm" value="2">
                <!-- This can be set in PayPal profile -->
                <!-- <input type="hidden" name="notify_url" value="http://10.10.10.10/payment-listner.php"> -->
                <input type="hidden" name="cancel_return" value="http://localhost:3000/payment_fail">
                <br />
                <div class="form-group">
                  <input type="text" name="email" placeholder="Email Address"
                    id="email_address" onkeyup="setCustom()" class="form-control" required/>
                </div>
                <div class="form-group">
                <input type="text" name="phone" placeholder="Phone Number"
                    id="phone_number" onkeyup="setCustom()" class="form-control" />
                </div>
                <div class="form-group">
                  <button type="submit" class="border-0" >
                    <img src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/checkout-logo-large.png" alt="Check out with PayPal" />
                  </button>
                </div>
            </form>

            </div>
        </div>
        
    </div>
</div>

<script>
    const setCustom = () => {
        let email = document.getElementById("email_address").value;
        let mobile = document.getElementById("phone_number").value;
        let custom_txt = document.getElementById("custom_txt");

        let custom_field = `${email}|${mobile}`;
        custom_txt.value = custom_field;
        console.log(custom_field);
    }
    
</script>